<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Porphyry.js — Zero-dependency SVG mind map library</title>

  <link rel="icon" type="image/png" href="favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="favicon/favicon.svg" />
  <link rel="shortcut icon" href="favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="Porphyry.js" />
  <link rel="manifest" href="favicon/site.webmanifest" />

  <meta name="description" content="Porphyry.js: A lightweight, zero-dependency JavaScript library for rendering interactive mind maps as SVG. Features 5 layout modes, 9 themes, collapsible branches, and automatic text wrapping.">
  <meta name="keywords" content="Porphyry.js, JavaScript library, mind map, SVG mind map, zero-dependency, interactive diagram, data visualization, collapsible tree, JS mindmap, open source">
  <meta name="author" content="Antoniu-Mihai Temian">

  <meta property="og:title" content="Porphyry.js — Zero-dependency SVG mind map library">
  <meta property="og:url" content="https://porphyry.dev">
  <meta property="og:type" content="website">
  <meta property="og:description" content="A lightweight, zero-dependency JavaScript library for rendering interactive mind maps as SVG. Features multiple layouts, themes, and collapsible branches for a crisp diagram at any resolution.">
  <meta property="og:image" content="https://porphyry.dev/resources/fb-porphyry-js.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="Porphyry.js mind map demo preview">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Porphyry.js — Zero-dependency SVG mind map library">
  <meta name="twitter:description" content="A lightweight, zero-dependency JavaScript library for rendering interactive mind maps as SVG. Easily build clean, responsive, and customizable mind maps.">
  <meta name="twitter:url" content="https://porphyry.dev">
  <meta name="twitter:image" content="https://porphyry.dev/resources/fb-porphyry-js.png">
  <meta name="twitter:image:alt" content="Porphyry.js mind map demo preview">

  <link rel="stylesheet" href="resources/index.css" />

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-8G6PTHXC15"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-8G6PTHXC15');
  </script>
</head>
<body>

<!-- ── Header ── -->
<header>
  <div class="header-left">
    <div class="logo">
      <svg class="logo-icon" viewBox="0 0 28 28" fill="none">
        <circle cx="14" cy="14" r="5" fill="#1A1F2E"/>
        <circle cx="14" cy="4"  r="2.5" fill="#4A90D9"/>
        <circle cx="14" cy="24" r="2.5" fill="#E05C5C"/>
        <circle cx="4"  cy="14" r="2.5" fill="#4CAF82"/>
        <circle cx="24" cy="14" r="2.5" fill="#F0883E"/>
        <circle cx="6"  cy="6"  r="2"   fill="#8B6FD4"/>
        <circle cx="22" cy="6"  r="2"   fill="#D4A017"/>
        <line x1="14" y1="9"  x2="14" y2="6.5"  stroke="#4A90D9" stroke-width="1.5"/>
        <line x1="14" y1="19" x2="14" y2="21.5" stroke="#E05C5C" stroke-width="1.5"/>
        <line x1="9"  y1="14" x2="6.5"  y2="14" stroke="#4CAF82" stroke-width="1.5"/>
        <line x1="19" y1="14" x2="21.5" y2="14" stroke="#F0883E" stroke-width="1.5"/>
      </svg>
      Porphyry.js
    </div>
    <span class="badge">v1.4.5</span>
    <nav class="tab-nav">
      <button class="tab-btn active" data-tab="demo">Demo</button>
      <button class="tab-btn"        data-tab="docs">Docs</button>
    </nav>
  </div>
  <a class="btn" href="https://github.com/antoniu86/porphyry.js" target="_blank" rel="noopener noreferrer" style="text-decoration:none">
    <svg width="15" height="15" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/></svg>
    GitHub
  </a>
</header>

<!-- ── Main (workspace + docs share this flex:1 container) ── -->
<main>

<!-- ── Workspace ── -->
<div class="workspace">
  <div class="workspace-body">
    <button class="sidebar-toggle" id="sidebar-toggle" title="Toggle sidebar">
      <svg width="8" height="12" viewBox="0 0 8 12" fill="none"><path d="M6 1L1 6l5 5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
    </button>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">

    <div class="sidebar-header">
      Examples
      <button class="examples-toggle" id="examples-toggle" title="Collapse examples">
        <svg id="examples-chevron" width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M2 4l4 4 4-4" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>
    </div>
    <div class="examples-wrap" id="examples-wrap">
      <div class="examples" id="examples-list"></div>
    </div>

    <div class="json-editor-wrap">
      <div class="json-editor-label">JSON Data</div>
      <textarea id="json-editor" spellcheck="false"></textarea>
      <div class="json-error" id="json-error"></div>
      <button class="apply-btn" onclick="applyJSON()">Apply →</button>
    </div>
  </aside>

  <!-- Canvas -->
  <div class="canvas-wrap">
    <div class="canvas-toolbar" id="canvas-toolbar">
      <span style="font-size:11px;color:var(--muted);font-weight:700;letter-spacing:.4px">LAYOUT</span>
      <div class="layout-toggle" id="layout-toggle">
        <button class="toggle-btn active" data-layout="auto" title="Balanced left & right">⇔ Auto</button>
        <button class="toggle-btn" data-layout="left"  title="All branches left">← Left</button>
        <button class="toggle-btn" data-layout="right" title="All branches right">Right →</button>
        <button class="toggle-btn" data-layout="down"  title="Tree grows downward">↓ Down</button>
        <button class="toggle-btn" data-layout="up"    title="Tree grows upward">↑ Up</button>
      </div>
      <div class="separator"></div>
      <span style="font-size:11px;color:var(--muted);font-weight:700;letter-spacing:.4px">CENTER EDGE</span>
      <div class="layout-toggle" id="center-edge-toggle">
        <button class="toggle-btn active" data-edge="side"     title="Edges exit the left/right sides of the center node">⇔ Side</button>
        <button class="toggle-btn"        data-edge="vertical" title="Edges fan out from the top/bottom of the center node, auto-picked per branch">⇕ Fan</button>
      </div>
      <div class="separator"></div>
      <label class="interact-toggle">
        <input type="checkbox" id="toggle-pan"      checked onchange="setInteraction()"> Pan
      </label>
      <label class="interact-toggle">
        <input type="checkbox" id="toggle-zoom"     checked onchange="setInteraction()"> Zoom
      </label>
      <label class="interact-toggle">
        <input type="checkbox" id="toggle-collapse" checked onchange="setInteraction()"> Collapse
      </label>
      <div class="separator"></div>
      <span style="font-size:11px;color:var(--muted);font-weight:700;letter-spacing:.4px">SPACING</span>
      <div class="spacing-wrap">
        <input type="range" class="spacing-slider" id="spacing-slider"
          min="0.1" max="2.0" step="0.1" value="0.6"
          oninput="setSpacing(this.value)">
        <span class="spacing-value" id="spacing-value">0.6×</span>
      </div>
      <div class="separator"></div>
      <span style="font-size:11px;color:var(--muted);font-weight:700;letter-spacing:.4px">THEME</span>
      <select class="theme-select" id="theme-select" onchange="setTheme(this.value)">
        <option value="classic" selected>Classic</option>
        <option value="ghost">Ghost</option>
        <option value="underline">Underline</option>
        <option value="baseline">Baseline</option>
        <option value="outline">Outline</option>
        <option value="solid">Solid</option>
        <option value="solid-sharp">Solid Sharp</option>
        <option value="outline-sharp">Outline Sharp</option>
        <option value="minimal">Minimal</option>
      </select>
      <span class="canvas-tips" id="canvas-tips"></span>
    </div>
    <div class="canvas-stage" id="canvas-stage">
      <div id="porphyry-container"></div>
      <!-- Demo-only size preview HUD — not part of the library -->
      <div class="demo-size-hud" id="demo-size-hud">
        <input type="number" class="demo-dim-input" id="demo-w" placeholder="W" min="100" max="3000" step="10" title="Container width (px)">
        <span class="demo-dim-sep">×</span>
        <input type="number" class="demo-dim-input" id="demo-h" placeholder="H" min="100" max="2000" step="10" title="Container height (px)">
        <span class="demo-dim-unit">px</span>
        <button class="demo-dim-reset" id="demo-dim-reset" title="Reset to full size">↺</button>
      </div>
    </div>
  </div>
  </div><!-- /.workspace-body -->
</div>

<!-- ── Docs Panel ── -->
<div class="docs-panel" id="docs-panel">
  <div class="docs-content">

    <!-- Hero -->
    <div class="docs-hero">
      <svg width="52" height="52" viewBox="0 0 28 28" fill="none" style="flex-shrink:0">
        <rect width="28" height="28" rx="7" fill="#1A1F2E"/>
        <circle cx="14" cy="14" r="3.5" fill="#fff"/>
        <circle cx="14" cy="4.5" r="2" fill="#4A90D9"/>
        <circle cx="14" cy="23.5" r="2" fill="#E05C5C"/>
        <circle cx="4.5" cy="14" r="2" fill="#4CAF82"/>
        <circle cx="23.5" cy="14" r="2" fill="#F0883E"/>
        <circle cx="6.5" cy="6.5" r="1.6" fill="#8B6FD4"/>
        <circle cx="21.5" cy="6.5" r="1.6" fill="#D4A017"/>
        <line x1="14" y1="10.5" x2="14" y2="6.5" stroke="#4A90D9" stroke-width="1.3" stroke-linecap="round"/>
        <line x1="14" y1="17.5" x2="14" y2="21.5" stroke="#E05C5C" stroke-width="1.3" stroke-linecap="round"/>
        <line x1="10.5" y1="14" x2="6.5" y2="14" stroke="#4CAF82" stroke-width="1.3" stroke-linecap="round"/>
        <line x1="17.5" y1="14" x2="21.5" y2="14" stroke="#F0883E" stroke-width="1.3" stroke-linecap="round"/>
        <line x1="11" y1="11" x2="8" y2="8" stroke="#8B6FD4" stroke-width="1.2" stroke-linecap="round"/>
        <line x1="17" y1="11" x2="20" y2="8" stroke="#D4A017" stroke-width="1.2" stroke-linecap="round"/>
      </svg>
      <div class="docs-hero-text">
        <h1>Porphyry.js</h1>
        <p>A lightweight, zero-dependency JavaScript library for rendering interactive mind maps as SVG. Named after Porphyry of Tyre, the ancient philosopher who introduced the hierarchical <em>tree of categories</em>.</p>
        <div class="docs-hero-badge">
          <span style="background:#EBF4FF;padding:2px 8px;border-radius:99px">v1.4.5</span>
          <span style="background:#F0FFF4;color:#276749;padding:2px 8px;border-radius:99px">Zero dependencies</span>
          <span style="background:#FAF5FF;color:#553C9A;padding:2px 8px;border-radius:99px">SVG-based</span>
          <span style="background:#FFFBEB;color:#92400E;padding:2px 8px;border-radius:99px">MIT license</span>
        </div>
      </div>
    </div>

    <!-- Quick Start -->
    <div class="docs-section">
      <h2>Quick Start</h2>
      <div class="callout" style="margin-bottom:18px">
        Want to see it in action first? Check out the <a href="/demo.html" target="_blank" rel="noopener noreferrer" style="color:var(--accent);font-weight:600">live demo →</a>
      </div>
      <h3>Via CDN (recommended)</h3>
      <p>The fastest way to get started — no download or build step needed:</p>
<pre><span class="cm">&lt;!-- Latest release via jsDelivr --&gt;</span>
<span class="kw">&lt;script</span> src=<span class="st">"https://cdn.jsdelivr.net/gh/antoniu86/porphyry.js@latest/porphyry.min.js"</span><span class="kw">&gt;&lt;/script&gt;</span>

<span class="cm">&lt;!-- Pin to a specific version --&gt;</span>
<span class="kw">&lt;script</span> src=<span class="st">"https://cdn.jsdelivr.net/gh/antoniu86/porphyry.js@v1.4.5/porphyry.min.js"</span><span class="kw">&gt;&lt;/script&gt;</span></pre>
      <h3>Self-hosted</h3>
      <p>Download <code>porphyry.min.js</code> (or <code>porphyry.js</code> for the commented source) and include it directly:</p>
<pre><span class="kw">&lt;script</span> src=<span class="st">"porphyry.min.js"</span><span class="kw">&gt;&lt;/script&gt;</span></pre>
      <h3>Example</h3>
<pre><span class="cm">&lt;!-- Include from CDN --&gt;</span>
<span class="kw">&lt;script</span> src=<span class="st">"https://cdn.jsdelivr.net/gh/antoniu86/porphyry.js@v1.4.5/porphyry.min.js"</span><span class="kw">&gt;&lt;/script&gt;</span>

<span class="cm">&lt;!-- Give it a container --&gt;</span>
<span class="kw">&lt;div</span> id=<span class="st">"map"</span> style=<span class="st">"width:100%;height:500px"</span><span class="kw">&gt;&lt;/div&gt;</span>

<span class="kw">&lt;script&gt;</span>
  <span class="kw">const</span> map = <span class="kw">new</span> <span class="fn">Porphyry</span>(<span class="st">'#map'</span>);
  map.<span class="fn">render</span>({
    topic: <span class="st">'My Topic'</span>,
    children: [
      { topic: <span class="st">'Branch A'</span> },
      { topic: <span class="st">'Branch B'</span>, children: [
        { topic: <span class="st">'Sub-node'</span> }
      ]}
    ]
  });
<span class="kw">&lt;/script&gt;</span></pre>
      <div class="callout">The container must have an explicit <code>width</code> and <code>height</code> — Porphyry fills 100% of it. Set these via CSS or inline styles.</div>
    </div>

    <!-- Data Format -->
    <div class="docs-section">
      <h2>Data Format</h2>
      <p>Porphyry accepts a plain JSON object. Every node has a <code>topic</code> and an optional <code>children</code> array. Nesting can go as deep as needed.</p>
<pre>{
  <span class="ky">topic</span>: <span class="st">"Root Subject"</span>,           <span class="cm">// required — label text</span>
  <span class="ky">url</span>:   <span class="st">"https://example.com"</span>,   <span class="cm">// optional — makes node clickable</span>
  <span class="ky">direction</span>: <span class="st">"left"</span>,              <span class="cm">// optional — "left"|"right", auto otherwise</span>
  <span class="ky">children</span>: [
    {
      <span class="ky">topic</span>: <span class="st">"First branch"</span>,
      <span class="ky">children</span>: [
        { <span class="ky">topic</span>: <span class="st">"Leaf node"</span> },
        { <span class="ky">topic</span>: <span class="st">"Linked leaf"</span>, <span class="ky">url</span>: <span class="st">"https://..."</span> }
      ]
    },
    { <span class="ky">topic</span>: <span class="st">"Second branch"</span> }
  ]
}</pre>
      <h3>Node fields</h3>
      <table class="prop-table">
        <tr><th>Field</th><th>Type</th><th>Description</th></tr>
        <tr><td>topic</td><td>string</td><td>Node label. Long text wraps automatically within the configured max width.</td></tr>
        <tr><td>url</td><td>string?</td><td>If present, the node becomes clickable and opens this URL in a new tab. A small ↗ icon appears inside the node.</td></tr>
        <tr><td>direction</td><td>"left"|"right"?</td><td>Pin a root-level child to a specific side. Only respected on direct children of the root in horizontal layouts. Ignored in vertical layouts.</td></tr>
        <tr><td>children</td><td>Node[]?</td><td>Child nodes. Omit or leave empty for leaf nodes.</td></tr>
      </table>
    </div>

    <!-- Constructor -->
    <div class="docs-section">
      <h2>Constructor</h2>
<pre><span class="kw">new</span> <span class="fn">Porphyry</span>(selector, options)</pre>
      <table class="prop-table">
        <tr><th>Parameter</th><th>Type</th><th>Description</th></tr>
        <tr><td>selector</td><td>string | Element</td><td>A CSS selector string or a DOM element to render into.</td></tr>
        <tr><td>options</td><td>object?</td><td>Optional configuration. See Options reference below.</td></tr>
      </table>
    </div>

    <!-- Options -->
    <div class="docs-section">
      <h2>Options Reference</h2>

      <h3>Layout</h3>
      <table class="prop-table">
        <tr><th>Option</th><th>Default</th><th>Description</th></tr>
        <tr><td>layout</td><td>"auto"</td><td>Direction mode. One of <code>"auto"</code>, <code>"left"</code>, <code>"right"</code>, <code>"down"</code>, <code>"up"</code>. See Layout Modes below.</td></tr>
        <tr><td>centerEdge</td><td>"side"</td><td>Where edges connect on the center node in horizontal layouts. <code>"side"</code> exits the left/right walls. <code>"vertical"</code> fans edges out from the top or bottom center — top vs bottom is chosen automatically per branch based on vertical position. Nodes that are vertically close to the root (within roughly one root height) automatically draw from the side instead, keeping the fan shape clean. With <code>"vertical"</code> the center node's width no longer affects branch placement, so it can grow wide freely. Has no effect on <code>"up"</code>/<code>"down"</code> layouts.</td></tr>
        <tr><td>theme</td><td>"classic"</td><td>Visual theme controlling node shapes, fills, borders and edge anchors. See Themes below.</td></tr>
        <tr><td>fitPadding</td><td>20</td><td>Pixels of padding around the graph when auto-fitting to the container.</td></tr>
        <tr><td>lineHeight</td><td>1.45</td><td>Line height multiplier for wrapped text.</td></tr>
        <tr><td>spacing</td><td>1</td><td>Spacing multiplier applied to all node distances before depth-adaptive scaling. Any value from <code>0.1</code> (extremely compact) to <code>2.0</code> (very spread out). <code>1</code> is the default.</td></tr>
      </table>

      <h3>Spacing (horizontal layouts)</h3>
      <table class="prop-table">
        <tr><th>Option</th><th>Default</th><th>Description</th></tr>
        <tr><td>branchSpacingX</td><td>220</td><td>Horizontal gap (px) between the center node and depth-1 branches. Scales down automatically for deep trees.</td></tr>
        <tr><td>subSpacingX</td><td>170</td><td>Horizontal gap (px) between sub-levels (depth ≥ 2). Also auto-scales.</td></tr>
        <tr><td>verticalSpacing</td><td>50</td><td>Minimum vertical gap (px) between sibling nodes.</td></tr>
      </table>

      <h3>Spacing (vertical layouts)</h3>
      <table class="prop-table">
        <tr><th>Option</th><th>Default</th><th>Description</th></tr>
        <tr><td>verticalSpacingY</td><td>60</td><td>Vertical gap (px) between depth levels in <code>up</code>/<code>down</code> layouts.</td></tr>
        <tr><td>horizontalSpacing</td><td>30</td><td>Horizontal gap (px) between sibling subtrees in vertical layouts.</td></tr>
      </table>

      <h3>Center node</h3>
      <table class="prop-table">
        <tr><th>Option</th><th>Default</th><th>Description</th></tr>
        <tr><td>center.fontSize</td><td>17</td><td></td></tr>
        <tr><td>center.paddingX / paddingY</td><td>28 / 16</td><td></td></tr>
        <tr><td>center.maxWidth</td><td>240</td><td>Max node width (px) before text wraps to next line.</td></tr>
        <tr><td>center.radius</td><td>12</td><td>Corner radius of the center node rectangle.</td></tr>
        <tr><td>center.fill</td><td>"#1A1F2E"</td><td>Background color.</td></tr>
        <tr><td>center.color</td><td>"#FFFFFF"</td><td>Text color.</td></tr>
      </table>

      <h3>Branch nodes (depth 1)</h3>
      <table class="prop-table">
        <tr><th>Option</th><th>Default</th><th>Description</th></tr>
        <tr><td>branch.fontSize</td><td>14</td><td></td></tr>
        <tr><td>branch.paddingX / paddingY</td><td>18 / 10</td><td></td></tr>
        <tr><td>branch.maxWidth</td><td>200</td><td>Max node width (px) before text wraps.</td></tr>
        <tr><td>branch.color</td><td>"#FFFFFF"</td><td>Text color (fill comes from the color palette).</td></tr>
      </table>

      <h3>Leaf nodes (depth ≥ 2)</h3>
      <table class="prop-table">
        <tr><th>Option</th><th>Default</th><th>Description</th></tr>
        <tr><td>leaf.fontSize</td><td>13</td><td></td></tr>
        <tr><td>leaf.paddingX / paddingY</td><td>10 / 7</td><td></td></tr>
        <tr><td>leaf.maxWidth</td><td>170</td><td>Max node width (px) before text wraps.</td></tr>
        <tr><td>leaf.color</td><td>"#2D3748"</td><td>Text color.</td></tr>
      </table>

      <h3>Colors &amp; edges</h3>
      <table class="prop-table">
        <tr><th>Option</th><th>Default</th><th>Description</th></tr>
        <tr><td>colors</td><td>10-color palette</td><td>Array of hex color strings. Each root branch is assigned one in order; descendants inherit it.</td></tr>
        <tr><td>edgeWidth.root</td><td>2.5</td><td>Stroke width of edges leaving the center node.</td></tr>
        <tr><td>edgeWidth.branch</td><td>2</td><td>Stroke width of depth-1 → depth-2 edges.</td></tr>
        <tr><td>edgeWidth.leaf</td><td>1.5</td><td>Stroke width of deeper edges.</td></tr>
        <tr><td>edgeOpacity</td><td>0.85</td><td>Global opacity of all edges.</td></tr>
      </table>

      <h3>Interactions</h3>
      <p>All interactions are <strong>off by default</strong> for clean embedding. Opt in explicitly to what you need.</p>
      <table class="prop-table">
        <tr><th>Option</th><th>Default</th><th>Description</th></tr>
        <tr><td>interactions.pan</td><td>false</td><td>Enable drag-to-pan (mouse + touch).</td></tr>
        <tr><td>interactions.zoom</td><td>false</td><td>Enable scroll-wheel zoom and pinch-to-zoom.</td></tr>
        <tr><td>interactions.collapse</td><td>false</td><td>Show +/− toggle buttons on nodes to expand/collapse subtrees.</td></tr>
        <tr><td>interactions.hud</td><td>false</td><td>Inject a zoom HUD (−, level %, +, fit) into the bottom-right of the container.</td></tr>
        <tr><td>interactions.tips</td><td>false</td><td>Inject a hint bar at the bottom-center describing active interactions.</td></tr>
        <tr><td>interactions.download</td><td>false</td><td>Add a download-as-SVG button. When <code>hud: true</code> it appears inside the HUD; otherwise a standalone button is injected in the bottom-right corner.</td></tr>
        <tr><td>minZoom</td><td>0.08</td><td>Minimum zoom scale (when zoom is enabled).</td></tr>
        <tr><td>maxZoom</td><td>4</td><td>Maximum zoom scale (when zoom is enabled).</td></tr>
        <tr><td>zoomSensitivity</td><td>0.12</td><td>Scroll-wheel zoom speed per tick.</td></tr>
      </table>
    </div>

    <!-- Themes -->
    <div class="docs-section">
      <h2>Themes</h2>
      <p>The <code>theme</code> option controls node shapes, fills, borders and edge connection points across the whole map. All 9 themes work in every layout; 4 extra themes are exclusive to horizontal layouts (auto / left / right).</p>
<pre><span class="cm">// Set at init time</span>
<span class="kw">new</span> <span class="fn">Porphyry</span>(<span class="st">'#map'</span>, { theme: <span class="st">'solid'</span> });

<span class="cm">// Change at runtime</span>
map.options.theme = <span class="st">'baseline'</span>;
map.<span class="fn">_renderInternal</span>(<span class="kw">true</span>);</pre>

      <h3>Universal themes</h3>
      <table class="prop-table">
        <tr><th>Theme</th><th>Fill</th><th>Border</th><th>Edge anchor</th></tr>
        <tr><td>outline</td><td>white</td><td>colored full border, rounded</td><td>center (default for vertical)</td></tr>
        <tr><td>solid</td><td>solid color, rounded</td><td>none</td><td>center</td></tr>
        <tr><td>solid-sharp</td><td>solid color, sharp corners</td><td>none</td><td>center</td></tr>
        <tr><td>outline-sharp</td><td>white, sharp corners</td><td>colored full border</td><td>center</td></tr>
        <tr><td>minimal</td><td>none</td><td>none</td><td>center</td></tr>
      </table>

      <h3>Horizontal-only themes</h3>
      <table class="prop-table">
        <tr><th>Theme</th><th>Fill</th><th>Border</th><th>Edge anchor</th></tr>
        <tr><td>classic</td><td>dark center, colored pills (depth 1), 10% tint (depth 2+)</td><td>bottom line on leaves</td><td>bottom for leaves, center otherwise (default for horizontal)</td></tr>
        <tr><td>ghost</td><td>10% tinted on all nodes</td><td>none</td><td>center — all nodes</td></tr>
        <tr><td>underline</td><td>10% tinted on all nodes</td><td>bottom solid line</td><td>bottom — all nodes</td></tr>
        <tr><td>baseline</td><td>none</td><td>bottom solid line</td><td>bottom — all nodes</td></tr>
      </table>
      <p>When <code>classic</code> is selected with a vertical layout it automatically falls back to <code>outline</code>. When switching to a vertical layout in the demo, the <code>classic</code>, <code>ghost</code>, <code>underline</code> and <code>baseline</code> options are hidden from the dropdown.</p>

    <!-- Layout Modes -->
    <div class="docs-section">
      <h2>Layout Modes</h2>
      <p>Set via <code>options.layout</code> at init time, or by mutating <code>instance.options.layout</code> before calling <code>render()</code> again.</p>
      <table class="prop-table">
        <tr><th>Value</th><th>Description</th></tr>
        <tr><td>"auto"</td><td>Branches are distributed evenly left and right of the center node. Explicit <code>direction</code> fields in node data are honoured first; the remainder are balanced.</td></tr>
        <tr><td>"left"</td><td>All branches grow to the left. Node <code>direction</code> fields are ignored.</td></tr>
        <tr><td>"right"</td><td>All branches grow to the right. Node <code>direction</code> fields are ignored.</td></tr>
        <tr><td>"down"</td><td>Tree grows downward. Siblings spread horizontally. All nodes use the outlined button style.</td></tr>
        <tr><td>"up"</td><td>Tree grows upward. Siblings spread horizontally. All nodes use the outlined button style.</td></tr>
      </table>
      <div class="callout">In <code>"down"</code> and <code>"up"</code> modes all nodes — including the center and branches — use an <em>outlined button</em> style (white fill, colored border) instead of the solid-fill styles used in horizontal layouts.</div>
    </div>

    <!-- Collapsible Branches -->
    <div class="docs-section">
      <h2>Collapsible Branches</h2>
      <p>When <code>interactions.collapse</code> is enabled, a small circular toggle button appears at the child-facing edge of every non-root node that has children.</p>
      <ul>
        <li>Shows <strong>−</strong> when the subtree is expanded, <strong>+</strong> when collapsed.</li>
        <li>Button color matches the node's branch color; hover inverts fill and icon.</li>
        <li>Collapsed nodes are treated as leaves by the layout engine — the rest of the tree reflows automatically around them.</li>
        <li>Button position adapts to layout direction: left/right edge in horizontal layouts, top/bottom edge in vertical layouts.</li>
        <li>Collapse state is preserved across re-renders triggered by layout changes or data edits.</li>
        <li>Calling <code>render()</code> clears all collapse state and restores the full tree.</li>
      </ul>
<pre><span class="kw">const</span> map = <span class="kw">new</span> <span class="fn">Porphyry</span>(<span class="st">'#map'</span>, {
  interactions: { collapse: <span class="nm">true</span> }
});

map.<span class="fn">render</span>(data);

<span class="cm">// Programmatically collapse a branch by its internal ID</span>
<span class="cm">// (IDs assigned depth-first, root = 0)</span>
map._collapsed.<span class="fn">add</span>(<span class="nm">3</span>);
map.<span class="fn">_renderInternal</span>(<span class="nm">false</span>); <span class="cm">// re-render, no re-fit</span></pre>
    </div>

    <!-- Methods -->
    <div class="docs-section">
      <h2>Methods</h2>
      <table class="prop-table">
        <tr><th>Method</th><th>Description</th></tr>
        <tr><td>render(data)</td><td>Parse <code>data</code>, lay out and draw the full tree. <strong>Clears all collapse state.</strong> Automatically calls <code>fit()</code> after the first paint.</td></tr>
        <tr><td>fit()</td><td>Scale and translate the graph so it fits neatly inside the container, respecting <code>fitPadding</code>.</td></tr>
        <tr><td>reset()</td><td>Reset pan and zoom to 1:1, centered.</td></tr>
        <tr><td>destroy()</td><td>Disconnects the internal <code>ResizeObserver</code>. Call when removing the container from the DOM to avoid memory leaks.</td></tr>
        <tr><td>downloadSVG(filename?)</td><td>Download the current mind map as a standalone SVG file. <code>filename</code> defaults to <code>'mindmap.svg'</code>. The export strips the pan/zoom transform and recalculates a clean viewBox from content bounds.</td></tr>
        <tr><td>_renderInternal(autoFit)</td><td>Re-layout and redraw while <strong>preserving collapse state</strong>. Pass <code>false</code> to skip re-fitting (e.g. after a collapse toggle or layout switch).</td></tr>
        <tr><td>_rebindInteractions()</td><td>Call after mutating <code>options.interactions</code> at runtime. Strips old event listeners, re-attaches new ones, and updates cursor and tips text.</td></tr>
      </table>
<pre><span class="kw">const</span> map = <span class="kw">new</span> <span class="fn">Porphyry</span>(<span class="st">'#map'</span>, {
  layout: <span class="st">'auto'</span>,
  interactions: { pan: <span class="nm">true</span>, zoom: <span class="nm">true</span>, collapse: <span class="nm">true</span>, hud: <span class="nm">true</span>, tips: <span class="nm">true</span>, download: <span class="nm">true</span> },
  colors: [<span class="st">'#E05C5C'</span>, <span class="st">'#4A90D9'</span>, <span class="st">'#4CAF82'</span>],
  branchSpacingX: <span class="nm">200</span>,
});

map.<span class="fn">render</span>(myData);

<span class="cm">// Switch to vertical layout and re-render</span>
map.options.layout = <span class="st">'down'</span>;
map.<span class="fn">render</span>(myData);

<span class="cm">// Toggle pan off at runtime</span>
map.options.interactions.pan = <span class="nm">false</span>;
map.<span class="fn">_rebindInteractions</span>();</pre>
    </div>

    <!-- SVG Download -->
    <div class="docs-section">
      <h2>SVG Download</h2>
      <p>The <code>downloadSVG()</code> method exports the current mind map as a clean, self-contained SVG file that opens in browsers, Illustrator, Inkscape, and any SVG editor.</p>
      <p>There are three ways to expose it depending on your use case:</p>
<pre><span class="cm">// Option 1 — download icon appears inside the HUD alongside zoom controls</span>
<span class="kw">new</span> <span class="fn">Porphyry</span>(<span class="st">'#map'</span>, {
  interactions: { hud: <span class="nm">true</span>, download: <span class="nm">true</span> }
});

<span class="cm">// Option 2 — standalone button injected in the bottom-right corner</span>
<span class="kw">new</span> <span class="fn">Porphyry</span>(<span class="st">'#map'</span>, {
  interactions: { download: <span class="nm">true</span> }
});

<span class="cm">// Option 3 — no button, wire your own trigger anywhere on the page</span>
document.<span class="fn">getElementById</span>(<span class="st">'my-btn'</span>).addEventListener(<span class="st">'click'</span>, () => {
  map.<span class="fn">downloadSVG</span>(<span class="st">'my-diagram.svg'</span>); <span class="cm">// filename is optional</span>
});</pre>
      <div class="callout">System fonts (<code>system-ui</code>, <code>sans-serif</code>) are referenced by name in the export — text renders correctly on any machine that has them, which is effectively everywhere. The pan/zoom transform is stripped so the file always opens at the correct size regardless of the viewer state.</div>
    </div>

    <!-- Node Links -->
    <div class="docs-section">
      <h2>Node Links</h2>
      <p>Any node can carry an optional <code>url</code> field. When present:</p>
      <ul>
        <li>A small ↗ external-link icon appears inside the node on the right side.</li>
        <li>The cursor changes to a pointer on hover.</li>
        <li>Clicking opens the URL in a new tab (<code>noopener noreferrer</code>).</li>
        <li>A drag that moves more than 5 px never triggers the link, so panning over linked nodes is safe.</li>
      </ul>
<pre>{ <span class="ky">topic</span>: <span class="st">"React"</span>, <span class="ky">url</span>: <span class="st">"https://react.dev"</span> }</pre>
    </div>

    <!-- Text Wrapping -->
    <div class="docs-section">
      <h2>Text Wrapping</h2>
      <p>Long node labels wrap automatically. Each depth level has a configurable <code>maxWidth</code>. Text is measured with a hidden Canvas element before layout so node dimensions are always exact — the layout engine never needs to re-run after drawing.</p>
      <ul>
        <li>Words are greedily packed onto lines.</li>
        <li>A single word wider than <code>maxWidth</code> gets its own line rather than being clipped.</li>
        <li>Multi-line branch nodes (depth 1) switch from a pill shape to a rounded rectangle (<code>rx=10</code>) automatically.</li>
        <li>All vertical spacing accounts for the actual wrapped height, so nodes never overlap.</li>
      </ul>
    </div>

    <!-- Adaptive Spacing -->
    <div class="docs-section">
      <h2>Adaptive Column Spacing</h2>
      <p>In horizontal layouts, column gaps scale down automatically as the tree gets deeper, keeping wide maps readable without manual tuning.</p>
      <table class="prop-table">
        <tr><th>Max depth</th><th>Factor</th><th>branchSpacingX</th><th>subSpacingX</th></tr>
        <tr><td>≤ 2</td><td>1.00</td><td>220 px</td><td>170 px</td></tr>
        <tr><td>3</td><td>0.83</td><td>183 px</td><td>141 px</td></tr>
        <tr><td>4</td><td>0.63</td><td>138 px</td><td>107 px</td></tr>
        <tr><td>5</td><td>0.50</td><td>110 px</td><td>85 px</td></tr>
        <tr><td>≥ 6</td><td>0.45</td><td>99 px</td><td>77 px</td></tr>
      </table>
      <p>The floor is 45 % of the configured defaults. Vertical layouts are unaffected.</p>
    </div>

  </div>
</div>

</main>
<footer>Created by <a href="https://www.temian.ro" target="_blank" rel="noopener noreferrer">antoniu</a></footer>

<script src="porphyry.min.js"></script>
<script src="resources/index.js"></script>
</body>
</html>